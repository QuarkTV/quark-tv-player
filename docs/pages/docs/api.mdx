# API Reference

## BunnyStreamClient

### Configuration

```typescript
interface BunnyStreamConfig {
  apiKey: string;
  libraryId: string;
  baseUrl?: string;
  cdnHostname?: string;
  tokenAuthKey?: string;
}
```

- `apiKey`: Your Bunny Stream API key
- `libraryId`: Your video library ID
- `baseUrl`: Optional. The Bunny Stream API base URL (default: 'https://video.bunnycdn.com')
- `cdnHostname`: Optional. Your CDN hostname (default: `vz-{libraryId}.b-cdn.net`)
- `tokenAuthKey`: Optional. Token authentication key (default: same as apiKey)

### Methods

#### `getVideo(videoId: string): Promise<VideoMetadata>`

Fetches video metadata from Bunny.net.

```typescript
interface VideoMetadata {
  videoLibraryId: string;
  guid: string;
  title?: string;
  dateUploaded?: string;
  views?: number;
  isPublic?: boolean;
  length?: number;
  status?: number;
  thumbnailUrl?: string;
  resolutions?: string[];
  encodeProgress?: number;
  storageSize?: number;
  captions?: Array<{
    srclang: string;
    label: string;
    url: string;
  }>;
}
```

#### `getHLSStreamUrl(videoId: string): Promise<string>`

Gets the HLS stream URL for a video.

#### `getThumbnailUrl(videoId: string, time?: number): string`

Gets the thumbnail URL for a video. Optionally specify a timestamp.

## QuarkTVPlayer Component

### Props

```typescript
interface QuarkTVPlayerProps {
  videoId: string;
  config: BunnyStreamClient;
  streamerInfo?: {
    name: string;
    title?: string;
    category?: string;
    viewers?: number;
    avatarUrl?: string;
  };
  onError?: (error: Error) => void;
  onPlay?: () => void;
  onPause?: () => void;
  onEnded?: () => void;
  onTimeUpdate?: (time: number) => void;
  onQualityChange?: (quality: string) => void;
}
```

### CSS Customization

The player can be customized using CSS variables:

```css
media-player {
  /* Colors */
  --media-brand: #9147ff;
  --media-focus-ring: #9147ff;
  --media-background: #0e0e10;

  /* Controls */
  --media-control-background: rgba(0, 0, 0, 0.7);
  --media-control-hover-background: rgba(0, 0, 0, 0.85);
}
```

### Events

The player emits various events that you can listen to:

```jsx
<QuarkTVPlayer
  videoId="your-video-id"
  config={client}
  onPlay={() => console.log('Video started playing')}
  onPause={() => console.log('Video paused')}
  onEnded={() => console.log('Video ended')}
  onTimeUpdate={(time) => console.log('Current time:', time)}
  onQualityChange={(quality) => console.log('Quality changed to:', quality)}
  onError={(error) => console.error('Error:', error)}
/>
``` 